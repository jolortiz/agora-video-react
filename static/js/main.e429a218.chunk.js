(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){e.exports=a(132)},106:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=(a(106),a(34)),l=a.n(i),u=a(58),m=a(17),s=a(25),d=a(76),v=a(186),p=a(94),f=a(185),b=a(183),h=a(184),E=a(187),g=a(191),j=a(188),O=a(182),y=a(195),C=a(198),I=a(197),w=a(192),k=a(193),x=a(91),S=a.n(x),N=a(194),W=a(189),F=a(190),L=a(196),T=a(199),D=a(48),M=a(180),A=a(67),U=a(65),J=a(88),P=a.n(J),V=a(89),q=a.n(V)()(P.a),B=q.createClient({mode:"live",codec:"vp8"}),R=function(){},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){var t=!0,a=function(){e&&e.getCameras().then(function(e){t&&c(e)}).catch(R)};return e&&e.on("camera-changed",a),a(),function(){t=!1,e&&e.gatewayClient.removeEventListener("cameraChanged",a)}},[e]),r},H=q.createClient({mode:"live",codec:"vp8"}),z=function(){},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){var t=!0,a=function(){e&&e.getRecordingDevices().then(function(e){t&&c(e)}).catch(z)};return e&&e.on("recording-device-changed",a),a(),function(){t=!1,e&&e.gatewayClient.removeEventListener("recordingDeviceChanged",a)}},[e]),r},K=a(92),Q=function(e,t){var a=Object(n.useState)(void 0),r=Object(m.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)([]),l=Object(m.a)(i,2),u=l[0],s=l[1];return Object(n.useEffect)(function(){var a=!0,n=function(e){if(a){var t=e.stream;s(function(e){return[].concat(Object(K.a)(e),[t])})}},r=function(e){var t=e.stream;if(t){var a=t.getId(),n=u.findIndex(function(e){return e.getId()===a});-1!==n&&s(function(e){return e.splice(n,1),e})}},c=function(n){a&&(t?t(n.stream.getId())&&e.subscribe(n.stream):e.subscribe(n.stream))},i=function(e){if(a){var t,n=e.stream,r=n.stop,c=n.close;n.close=(t=c,function(){t(),o(void 0)}),n.stop=function(e){return function(){e(),o(void 0)}}(r),o(n)}};return e&&(e.on("stream-published",i),e.on("stream-added",c),e.on("stream-subscribed",n),e.on("peer-leave",r),e.on("stream-removed",r)),function(){a=!1,e&&(e.gatewayClient.removeEventListener("stream-published",i),e.gatewayClient.removeEventListener("stream-added",c),e.gatewayClient.removeEventListener("stream-subscribed",n),e.gatewayClient.removeEventListener("peer-leave",r),e.gatewayClient.removeEventListener("stream-removed",r))}},[e,t]),[c,u,[c].concat(u)]},X=Object(d.a)(function(e){return{root:{flexGrow:1,padding:12},title:{flexGrow:1,fontWeight:400},divider:{marginBottom:"32px"},buttonContainer:{display:"flex",justifyContent:"space-around"},buttonItem:{width:"38.2%"},buttonTop:{marginRight:"8px"},advanceSettings:{marginTop:16}}}),Y={appId:"",channel:"",uid:"",token:void 0,cameraId:"",microphoneId:"",mode:"rtc",codec:"h264"},Z=function(e,t){switch(t.type){default:return e;case"setAppId":return Object(s.a)({},e,{appId:t.value});case"setChannel":return Object(s.a)({},e,{channel:t.value});case"setUid":return Object(s.a)({},e,{uid:t.value});case"setToken":return Object(s.a)({},e,{token:t.value});case"setCamera":return Object(s.a)({},e,{cameraId:t.value});case"setMicrophone":return Object(s.a)({},e,{microphoneId:t.value});case"setMode":return Object(s.a)({},e,{mode:t.value});case"setCodec":return Object(s.a)({},e,{codec:t.value})}};function _(){var e=X(),t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(m.a)(i,2),d=s[0],x=s[1],J=Object(n.useState)(!1),P=Object(m.a)(J,2),V=P[0],B=P[1],R=Object(n.useState)(!1),H=Object(m.a)(R,2),z=H[0],K=H[1],_=Object(n.useState)(!1),ee=Object(m.a)(_,2),te=ee[0],ae=ee[1],ne=Object(n.useReducer)(Z,Y),re=Object(m.a)(ne,2),ce=re[0],oe=re[1],ie=Object(n.useState)(void 0),le=Object(m.a)(ie,2),ue=le[0],me=le[1],se=G(),de=$(),ve=Q(ue),pe=Object(m.a)(ve,3),fe=pe[0],be=pe[1],he=(pe[2],Object(U.useSnackbar)().enqueueSnackbar),Ee=function(e){return function(t){return oe({type:e,value:t.target.value})}},ge=function(){var e=Object(u.a)(l.a.mark(function e(){var t,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=q.createClient({mode:ce.mode,codec:ce.codec}),me(t),ae(!0),e.prev=3,a=isNaN(Number(ce.uid))?null:Number(ce.uid),e.next=7,t.init(ce.appId);case 7:return e.next=9,t.join(ce.token,ce.channel,a);case 9:return n=q.createStream({streamID:a||12345,video:!0,audio:!0,screen:!1}),e.next=12,n.init();case 12:return e.next=14,t.publish(n);case 14:K(!0),B(!0),he("Joined channel ".concat(ce.channel),{variant:"info"}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),he("Failed to join, ".concat(e.t0),{variant:"error"});case 22:return e.prev=22,ae(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,19,22,25]])}));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ae(!0),e.prev=1,!fe){e.next=6;break}return e.next=5,ue.publish(fe);case 5:K(!0);case 6:he("Stream published",{variant:"info"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),he("Failed to publish, ".concat(e.t0),{variant:"error"});case 12:return e.prev=12,ae(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,9,12,15]])}));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),e.prev=1,fe&&(fe.close(),ue.unpublish(fe)),e.next=5,ue.leave();case 5:K(!1),B(!1),he("Left channel",{variant:"info"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),he("Failed to leave, ".concat(e.t0),{variant:"error"});case 13:return e.prev=13,ae(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[1,10,13,16]])}));return function(){return e.apply(this,arguments)}}(),ye=function(){fe&&(ue.unpublish(fe),K(!1),he("Stream unpublished",{variant:"info"}))},Ce=function(){try{fe&&(fe.muteAudio(),o(!0))}catch(e){he("Failed to mute, ".concat(e),{variant:"error"})}},Ie=function(){try{fe&&(fe.unmuteAudio(),o(!1))}catch(e){he("Failed to unmute, ".concat(e),{variant:"error"})}},we=function(){try{fe&&(fe.unmuteVideo(),x(!1))}catch(e){he("Failed to enable video, ".concat(e),{variant:"error"})}},ke=function(){try{fe&&(fe.muteVideo(),x(!0))}catch(e){he("Failed to disable video, ".concat(e),{variant:"error"})}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{color:"primary"},r.a.createElement(h.a,null,r.a.createElement(p.a,{className:e.title,variant:"h6"},"Demo"),r.a.createElement(function(){return r.a.createElement(O.a,{className:e.buttonTop,color:c?"primary":"secondary",onClick:c?Ie:Ce,variant:"contained",disabled:!V||te},c?"Unmute":"Mute")},null),r.a.createElement(function(){return r.a.createElement(O.a,{color:d?"primary":"secondary",onClick:d?we:ke,variant:"contained",disabled:!V||te},d?"Show":"Hide")},null))),r.a.createElement(h.a,{className:e.divider}),r.a.createElement(f.a,null,r.a.createElement(v.a,{container:!0,spacing:3},r.a.createElement(v.a,{item:!0,xs:12,md:4},r.a.createElement(E.a,null,r.a.createElement(j.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(y.a,{required:!0,value:ce.appId,onChange:Ee("setAppId"),id:"appId",label:"App ID",fullWidth:!0,margin:"normal"}),r.a.createElement(y.a,{required:!0,value:ce.channel,onChange:Ee("setChannel"),id:"channel",label:"Channel",fullWidth:!0,margin:"normal"}),r.a.createElement(y.a,{value:ce.token,onChange:Ee("setToken"),id:"token",label:"Token",fullWidth:!0,margin:"normal"}))),r.a.createElement(g.a,{className:e.buttonContainer},r.a.createElement(function(){return r.a.createElement(O.a,{className:e.buttonItem,color:V?"secondary":"primary",onClick:V?Oe:ge,variant:"contained",disabled:te},V?"Leave":"Join")},null),r.a.createElement(function(){return r.a.createElement(O.a,{className:e.buttonItem,color:z?"secondary":"default",onClick:z?ye:je,variant:"contained",disabled:!V||te},z?"Unpublish":"Publish")},null))),r.a.createElement(M.a,{theme:Object(D.a)({palette:{type:"dark"}})},r.a.createElement(I.a,{className:e.advanceSettings},r.a.createElement(w.a,{expandIcon:r.a.createElement(S.a,null)},r.a.createElement(p.a,null,"Advanced Settings")),r.a.createElement(k.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(y.a,{value:ce.uid,id:"uid",onChange:Ee("setUid"),label:"UID",fullWidth:!0,margin:"normal"}),r.a.createElement(y.a,{id:"cameraId",value:ce.cameraId,onChange:Ee("setCamera"),select:!0,label:"Camera",helperText:"Please select your camera",fullWidth:!0,margin:"normal"},se.map(function(e){return r.a.createElement(C.a,{key:e.deviceId,value:e.deviceId},e.label)})),r.a.createElement(y.a,{id:"microphoneId",value:ce.microphoneId,onChange:Ee("setMicrophone"),select:!0,label:"Microphone",helperText:"Please select your microphone",fullWidth:!0,margin:"normal"},de.map(function(e){return r.a.createElement(C.a,{key:e.deviceId,value:e.deviceId},e.label)})),r.a.createElement(W.a,{fullWidth:!0,component:"fieldset",margin:"normal"},r.a.createElement(F.a,null,"Mode"),r.a.createElement(T.a,{row:!0,value:ce.mode,onChange:Ee("setMode")},r.a.createElement(N.a,{value:"live",control:r.a.createElement(L.a,{color:"primary"}),label:"live"}),r.a.createElement(N.a,{value:"rtc",control:r.a.createElement(L.a,{color:"primary"}),label:"rtc"}))),r.a.createElement(W.a,{fullWidth:!0,component:"fieldset",margin:"normal"},r.a.createElement(F.a,null,"Codec"),r.a.createElement(T.a,{row:!0,value:ce.codec,onChange:Ee("setCodec")},r.a.createElement(N.a,{value:"vp8",control:r.a.createElement(L.a,{color:"primary"}),label:"vp8"}),r.a.createElement(N.a,{value:"h264",control:r.a.createElement(L.a,{color:"primary"}),label:"h264"})))))))),r.a.createElement(v.a,{item:!0,xs:12,md:8},fe&&r.a.createElement(A.a,{stream:fe,fit:"contain",label:"local"}),be.map(function(e){return r.a.createElement(A.a,{key:e.getId(),stream:e,fit:"contain",label:e.getId()})})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=Object(D.a)({palette:{primary:{main:"#1E88E5"},secondary:{main:"#FF4081"}}});o.a.render(r.a.createElement(M.a,{theme:ee},r.a.createElement(function(){return r.a.createElement(U.SnackbarProvider,{anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2500,maxSnack:5},r.a.createElement(_,null))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[101,1,2]]]);
//# sourceMappingURL=main.e429a218.chunk.js.map