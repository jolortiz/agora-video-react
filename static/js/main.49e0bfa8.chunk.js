(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,a,t){e.exports=t(132)},106:function(e,a,t){},132:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),o=t.n(c),l=(t(106),t(34)),i=t.n(l),u=t(58),m=t(17),s=t(25),d=t(76),v=t(186),f=t(94),p=t(185),b=t(183),h=t(184),E=t(187),g=t(191),j=t(188),O=t(182),C=t(195),y=t(198),I=t(197),w=t(192),k=t(193),x=t(91),S=t.n(x),W=t(194),N=t(189),L=t(190),F=t(196),D=t(199),M=t(48),A=t(180),T=t(67),U=t(65),J=t(88),P=t.n(J),q=t(89),B=t.n(q)()(P.a),G=B.createClient({mode:"live",codec:"vp8"}),R=function(){},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=Object(n.useState)([]),t=Object(m.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)(function(){var a=!0,t=function(){e&&e.getCameras().then(function(e){a&&c(e)}).catch(R)};return e&&e.on("camera-changed",t),t(),function(){a=!1,e&&e.gatewayClient.removeEventListener("cameraChanged",t)}},[e]),r},z=B.createClient({mode:"live",codec:"vp8"}),H=function(){},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,a=Object(n.useState)([]),t=Object(m.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)(function(){var a=!0,t=function(){e&&e.getRecordingDevices().then(function(e){a&&c(e)}).catch(H)};return e&&e.on("recording-device-changed",t),t(),function(){a=!1,e&&e.gatewayClient.removeEventListener("recordingDeviceChanged",t)}},[e]),r},K=t(92),Q=function(e,a){var t=Object(n.useState)(void 0),r=Object(m.a)(t,2),c=r[0],o=r[1],l=Object(n.useState)([]),i=Object(m.a)(l,2),u=i[0],s=i[1];return Object(n.useEffect)(function(){var t=!0,n=function(e){if(t){var a=e.stream;s(function(e){return[].concat(Object(K.a)(e),[a])})}},r=function(e){var a=e.stream;if(a){var t=a.getId(),n=u.findIndex(function(e){return e.getId()===t});-1!==n&&s(function(e){return e.splice(n,1),e})}},c=function(n){t&&(a?a(n.stream.getId())&&e.subscribe(n.stream):e.subscribe(n.stream))},l=function(e){if(t){var a,n=e.stream,r=n.stop,c=n.close;n.close=(a=c,function(){a(),o(void 0)}),n.stop=function(e){return function(){e(),o(void 0)}}(r),o(n)}};return e&&(e.on("stream-published",l),e.on("stream-added",c),e.on("stream-subscribed",n),e.on("peer-leave",r),e.on("stream-removed",r)),function(){t=!1,e&&(e.gatewayClient.removeEventListener("stream-published",l),e.gatewayClient.removeEventListener("stream-added",c),e.gatewayClient.removeEventListener("stream-subscribed",n),e.gatewayClient.removeEventListener("peer-leave",r),e.gatewayClient.removeEventListener("stream-removed",r))}},[e,a]),[c,u,[c].concat(u)]},X=Object(d.a)(function(e){return{root:{flexGrow:1,padding:12},title:{flexGrow:1,fontWeight:400},divider:{marginBottom:"32px"},buttonContainer:{display:"flex",justifyContent:"space-around"},buttonItem:{width:"38.2%"},advanceSettings:{marginTop:16}}}),Y={appId:"",channel:"",uid:"",token:void 0,cameraId:"",microphoneId:"",mode:"rtc",codec:"h264"},Z=function(e,a){switch(a.type){default:return e;case"setAppId":return Object(s.a)({},e,{appId:a.value});case"setChannel":return Object(s.a)({},e,{channel:a.value});case"setUid":return Object(s.a)({},e,{uid:a.value});case"setToken":return Object(s.a)({},e,{token:a.value});case"setCamera":return Object(s.a)({},e,{cameraId:a.value});case"setMicrophone":return Object(s.a)({},e,{microphoneId:a.value});case"setMode":return Object(s.a)({},e,{mode:a.value});case"setCodec":return Object(s.a)({},e,{codec:a.value})}};function _(){var e=X(),a=Object(n.useState)(!1),t=Object(m.a)(a,2),c=t[0],o=t[1],l=Object(n.useState)(!1),s=Object(m.a)(l,2),d=s[0],x=s[1],J=Object(n.useState)(!1),P=Object(m.a)(J,2),q=P[0],G=P[1],R=Object(n.useState)(!1),z=Object(m.a)(R,2),H=z[0],K=z[1],_=Object(n.useReducer)(Z,Y),ee=Object(m.a)(_,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(void 0),re=Object(m.a)(ne,2),ce=re[0],oe=re[1],le=V(),ie=$(),ue=Q(ce),me=Object(m.a)(ue,3),se=me[0],de=me[1],ve=(me[2],Object(U.useSnackbar)().enqueueSnackbar),fe=function(e){return function(a){return te({type:e,value:a.target.value})}},pe=function(){var e=Object(u.a)(i.a.mark(function e(){var a,t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=B.createClient({mode:ae.mode,codec:ae.codec}),oe(a),K(!0),e.prev=3,t=isNaN(Number(ae.uid))?null:Number(ae.uid),e.next=7,a.init(ae.appId);case 7:return e.next=9,a.join(ae.token,ae.channel,t);case 9:return n=B.createStream({streamID:t||12345,video:!0,audio:!0,screen:!1}),e.next=12,n.init();case 12:return e.next=14,a.publish(n);case 14:G(!0),x(!0),ve("Joined channel ".concat(ae.channel),{variant:"info"}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),ve("Failed to join, ".concat(e.t0),{variant:"error"});case 22:return e.prev=22,K(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,19,22,25]])}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K(!0),e.prev=1,!se){e.next=6;break}return e.next=5,ce.publish(se);case 5:G(!0);case 6:ve("Stream published",{variant:"info"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),ve("Failed to publish, ".concat(e.t0),{variant:"error"});case 12:return e.prev=12,K(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,9,12,15]])}));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.prev=1,se&&(se.close(),ce.unpublish(se)),e.next=5,ce.leave();case 5:G(!1),x(!1),ve("Left channel",{variant:"info"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),ve("Failed to leave, ".concat(e.t0),{variant:"error"});case 13:return e.prev=13,K(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[1,10,13,16]])}));return function(){return e.apply(this,arguments)}}(),Ee=function(){se&&(ce.unpublish(se),G(!1),ve("Stream unpublished",{variant:"info"}))},ge=function(){try{se&&(se.muteAudio(),o(!0))}catch(e){ve("Failed to mute, ".concat(e),{variant:"error"})}},je=function(){try{se&&(se.unmuteAudio(),o(!1))}catch(e){ve("Failed to unmute, ".concat(e),{variant:"error"})}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{color:"primary"},r.a.createElement(h.a,null,r.a.createElement(f.a,{className:e.title,variant:"h6"},"Demo"),r.a.createElement(function(){return r.a.createElement(O.a,{color:c?"primary":"secondary",onClick:c?je:ge,variant:"contained",disabled:!d||H},c?"Unmute":"Mute")},null))),r.a.createElement(h.a,{className:e.divider}),r.a.createElement(p.a,null,r.a.createElement(v.a,{container:!0,spacing:3},r.a.createElement(v.a,{item:!0,xs:12,md:4},r.a.createElement(E.a,null,r.a.createElement(j.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(C.a,{required:!0,value:ae.appId,onChange:fe("setAppId"),id:"appId",label:"App ID",fullWidth:!0,margin:"normal"}),r.a.createElement(C.a,{required:!0,value:ae.channel,onChange:fe("setChannel"),id:"channel",label:"Channel",fullWidth:!0,margin:"normal"}),r.a.createElement(C.a,{value:ae.token,onChange:fe("setToken"),id:"token",label:"Token",fullWidth:!0,margin:"normal"}))),r.a.createElement(g.a,{className:e.buttonContainer},r.a.createElement(function(){return r.a.createElement(O.a,{className:e.buttonItem,color:d?"secondary":"primary",onClick:d?he:pe,variant:"contained",disabled:H},d?"Leave":"Join")},null),r.a.createElement(function(){return r.a.createElement(O.a,{className:e.buttonItem,color:q?"secondary":"default",onClick:q?Ee:be,variant:"contained",disabled:!d||H},q?"Unpublish":"Publish")},null))),r.a.createElement(A.a,{theme:Object(M.a)({palette:{type:"dark"}})},r.a.createElement(I.a,{className:e.advanceSettings},r.a.createElement(w.a,{expandIcon:r.a.createElement(S.a,null)},r.a.createElement(f.a,null,"Advanced Settings")),r.a.createElement(k.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(C.a,{value:ae.uid,id:"uid",onChange:fe("setUid"),label:"UID",fullWidth:!0,margin:"normal"}),r.a.createElement(C.a,{id:"cameraId",value:ae.cameraId,onChange:fe("setCamera"),select:!0,label:"Camera",helperText:"Please select your camera",fullWidth:!0,margin:"normal"},le.map(function(e){return r.a.createElement(y.a,{key:e.deviceId,value:e.deviceId},e.label)})),r.a.createElement(C.a,{id:"microphoneId",value:ae.microphoneId,onChange:fe("setMicrophone"),select:!0,label:"Microphone",helperText:"Please select your microphone",fullWidth:!0,margin:"normal"},ie.map(function(e){return r.a.createElement(y.a,{key:e.deviceId,value:e.deviceId},e.label)})),r.a.createElement(N.a,{fullWidth:!0,component:"fieldset",margin:"normal"},r.a.createElement(L.a,null,"Mode"),r.a.createElement(D.a,{row:!0,value:ae.mode,onChange:fe("setMode")},r.a.createElement(W.a,{value:"live",control:r.a.createElement(F.a,{color:"primary"}),label:"live"}),r.a.createElement(W.a,{value:"rtc",control:r.a.createElement(F.a,{color:"primary"}),label:"rtc"}))),r.a.createElement(N.a,{fullWidth:!0,component:"fieldset",margin:"normal"},r.a.createElement(L.a,null,"Codec"),r.a.createElement(D.a,{row:!0,value:ae.codec,onChange:fe("setCodec")},r.a.createElement(W.a,{value:"vp8",control:r.a.createElement(F.a,{color:"primary"}),label:"vp8"}),r.a.createElement(W.a,{value:"h264",control:r.a.createElement(F.a,{color:"primary"}),label:"h264"})))))))),r.a.createElement(v.a,{item:!0,xs:12,md:8},se&&r.a.createElement(T.a,{stream:se,fit:"contain",label:"local"}),de.map(function(e){return r.a.createElement(T.a,{key:e.getId(),stream:e,fit:"contain",label:e.getId()})})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=Object(M.a)({palette:{primary:{main:"#1E88E5"},secondary:{main:"#FF4081"}}});o.a.render(r.a.createElement(A.a,{theme:ee},r.a.createElement(function(){return r.a.createElement(U.SnackbarProvider,{anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2500,maxSnack:5},r.a.createElement(_,null))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[101,1,2]]]);
//# sourceMappingURL=main.49e0bfa8.chunk.js.map