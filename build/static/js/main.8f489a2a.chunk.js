(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,a,t){e.exports=t(132)},106:function(e,a,t){},132:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),o=t.n(c),l=(t(106),t(34)),i=t.n(l),u=t(58),s=t(18),m=t(25),d=t(76),v=t(186),p=t(94),f=t(185),b=t(183),h=t(184),E=t(187),g=t(191),j=t(188),O=t(182),C=t(195),I=t(198),y=t(197),w=t(192),k=t(193),x=t(91),S=t.n(x),W=t(194),N=t(189),L=t(190),D=t(196),F=t(199),M=t(48),T=t(180),A=t(67),B=t(65),J=t(88),P=t.n(J),U=t(89),q=t.n(U)()(P.a),R=q.createClient({mode:"live",codec:"vp8"}),V=function(){},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=Object(n.useState)([]),t=Object(s.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)(function(){var a=!0,t=function(){e&&e.getCameras().then(function(e){a&&c(e)}).catch(V)};return e&&e.on("camera-changed",t),t(),function(){a=!1,e&&e.gatewayClient.removeEventListener("cameraChanged",t)}},[e]),r},G=q.createClient({mode:"live",codec:"vp8"}),H=function(){},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=Object(n.useState)([]),t=Object(s.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)(function(){var a=!0,t=function(){e&&e.getRecordingDevices().then(function(e){a&&c(e)}).catch(H)};return e&&e.on("recording-device-changed",t),t(),function(){a=!1,e&&e.gatewayClient.removeEventListener("recordingDeviceChanged",t)}},[e]),r},K=t(92),Q=function(e,a){var t=Object(n.useState)(void 0),r=Object(s.a)(t,2),c=r[0],o=r[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),u=i[0],m=i[1];return Object(n.useEffect)(function(){var t=!0,n=function(e){if(t){var a=e.stream;m(function(e){return[].concat(Object(K.a)(e),[a])})}},r=function(e){var a=e.stream;if(a){var t=a.getId(),n=u.findIndex(function(e){return e.getId()===t});-1!==n&&m(function(e){return e.splice(n,1),e})}},c=function(n){t&&(a?a(n.stream.getId())&&e.subscribe(n.stream):e.subscribe(n.stream))},l=function(e){if(t){var a,n=e.stream,r=n.stop,c=n.close;n.close=(a=c,function(){a(),o(void 0)}),n.stop=function(e){return function(){e(),o(void 0)}}(r),o(n)}};return e&&(e.on("stream-published",l),e.on("stream-added",c),e.on("stream-subscribed",n),e.on("peer-leave",r),e.on("stream-removed",r)),function(){t=!1,e&&(e.gatewayClient.removeEventListener("stream-published",l),e.gatewayClient.removeEventListener("stream-added",c),e.gatewayClient.removeEventListener("stream-subscribed",n),e.gatewayClient.removeEventListener("peer-leave",r),e.gatewayClient.removeEventListener("stream-removed",r))}},[e,a]),[c,u,[c].concat(u)]},X=Object(d.a)(function(e){return{root:{flexGrow:1,padding:12},title:{fontWeight:400},divider:{marginBottom:"32px"},buttonContainer:{display:"flex",justifyContent:"space-around"},buttonItem:{width:"38.2%"},advanceSettings:{marginTop:16}}}),Y={appId:"",channel:"",uid:"",token:void 0,cameraId:"",microphoneId:"",mode:"rtc",codec:"h264"},Z=function(e,a){switch(a.type){default:return e;case"setAppId":return Object(m.a)({},e,{appId:a.value});case"setChannel":return Object(m.a)({},e,{channel:a.value});case"setUid":return Object(m.a)({},e,{uid:a.value});case"setToken":return Object(m.a)({},e,{token:a.value});case"setCamera":return Object(m.a)({},e,{cameraId:a.value});case"setMicrophone":return Object(m.a)({},e,{microphoneId:a.value});case"setMode":return Object(m.a)({},e,{mode:a.value});case"setCodec":return Object(m.a)({},e,{codec:a.value})}};function _(){var e=X(),a=Object(n.useState)(!1),t=Object(s.a)(a,2),c=t[0],o=t[1],l=Object(n.useState)(!1),m=Object(s.a)(l,2),d=m[0],x=m[1],J=Object(n.useState)(!1),P=Object(s.a)(J,2),U=P[0],R=P[1],V=Object(n.useReducer)(Z,Y),G=Object(s.a)(V,2),H=G[0],K=G[1],_=Object(n.useState)(void 0),ee=Object(s.a)(_,2),ae=ee[0],te=ee[1],ne=z(),re=$(),ce=Q(ae),oe=Object(s.a)(ce,3),le=oe[0],ie=oe[1],ue=(oe[2],Object(B.useSnackbar)().enqueueSnackbar),se=function(e){return function(a){return K({type:e,value:a.target.value})}},me=function(){var e=Object(u.a)(i.a.mark(function e(){var a,t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=q.createClient({mode:H.mode,codec:H.codec}),te(a),R(!0),e.prev=3,t=isNaN(Number(H.uid))?null:Number(H.uid),e.next=7,a.init(H.appId);case 7:return e.next=9,a.join(H.token,H.channel,t);case 9:return n=q.createStream({streamID:t||12345,video:!0,audio:!0,screen:!1}),e.next=12,n.init();case 12:return e.next=14,a.publish(n);case 14:x(!0),o(!0),ue("Joined channel ".concat(H.channel),{variant:"info"}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),ue("Failed to join, ".concat(e.t0),{variant:"error"});case 22:return e.prev=22,R(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,19,22,25]])}));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),e.prev=1,!le){e.next=6;break}return e.next=5,ae.publish(le);case 5:x(!0);case 6:ue("Stream published",{variant:"info"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),ue("Failed to publish, ".concat(e.t0),{variant:"error"});case 12:return e.prev=12,R(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,9,12,15]])}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,le&&(le.close(),ae.unpublish(le)),e.next=5,ae.leave();case 5:x(!1),o(!1),ue("Left channel",{variant:"info"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),ue("Failed to leave, ".concat(e.t0),{variant:"error"});case 13:return e.prev=13,R(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[1,10,13,16]])}));return function(){return e.apply(this,arguments)}}(),pe=function(){le&&(ae.unpublish(le),x(!1),ue("Stream unpublished",{variant:"info"}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{color:"primary"},r.a.createElement(h.a,null,r.a.createElement(p.a,{className:e.title,variant:"h6"},"Basic Communication"))),r.a.createElement(h.a,{className:e.divider}),r.a.createElement(f.a,null,r.a.createElement(v.a,{container:!0,spacing:3},r.a.createElement(v.a,{item:!0,xs:12,md:4},r.a.createElement(E.a,null,r.a.createElement(j.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(C.a,{required:!0,value:H.appId,onChange:se("setAppId"),id:"appId",label:"App ID",fullWidth:!0,margin:"normal"}),r.a.createElement(C.a,{required:!0,value:H.channel,onChange:se("setChannel"),id:"channel",label:"Channel",fullWidth:!0,margin:"normal"}),r.a.createElement(C.a,{value:H.token,onChange:se("setToken"),id:"token",label:"Token",fullWidth:!0,margin:"normal"}))),r.a.createElement(g.a,{className:e.buttonContainer},r.a.createElement(function(){return r.a.createElement(O.a,{className:e.buttonItem,color:c?"secondary":"primary",onClick:c?ve:me,variant:"contained",disabled:U},c?"Leave":"Join")},null),r.a.createElement(function(){return r.a.createElement(O.a,{className:e.buttonItem,color:d?"secondary":"default",onClick:d?pe:de,variant:"contained",disabled:!c||U},d?"Unpublish":"Publish")},null))),r.a.createElement(T.a,{theme:Object(M.a)({palette:{type:"dark"}})},r.a.createElement(y.a,{className:e.advanceSettings},r.a.createElement(w.a,{expandIcon:r.a.createElement(S.a,null)},r.a.createElement(p.a,null,"Advanced Settings")),r.a.createElement(k.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(C.a,{value:H.uid,id:"uid",onChange:se("setUid"),label:"UID",fullWidth:!0,margin:"normal"}),r.a.createElement(C.a,{id:"cameraId",value:H.cameraId,onChange:se("setCamera"),select:!0,label:"Camera",helperText:"Please select your camera",fullWidth:!0,margin:"normal"},ne.map(function(e){return r.a.createElement(I.a,{key:e.deviceId,value:e.deviceId},e.label)})),r.a.createElement(C.a,{id:"microphoneId",value:H.microphoneId,onChange:se("setMicrophone"),select:!0,label:"Microphone",helperText:"Please select your microphone",fullWidth:!0,margin:"normal"},re.map(function(e){return r.a.createElement(I.a,{key:e.deviceId,value:e.deviceId},e.label)})),r.a.createElement(N.a,{fullWidth:!0,component:"fieldset",margin:"normal"},r.a.createElement(L.a,null,"Mode"),r.a.createElement(F.a,{row:!0,value:H.mode,onChange:se("setMode")},r.a.createElement(W.a,{value:"live",control:r.a.createElement(D.a,{color:"primary"}),label:"live"}),r.a.createElement(W.a,{value:"rtc",control:r.a.createElement(D.a,{color:"primary"}),label:"rtc"}))),r.a.createElement(N.a,{fullWidth:!0,component:"fieldset",margin:"normal"},r.a.createElement(L.a,null,"Codec"),r.a.createElement(F.a,{row:!0,value:H.codec,onChange:se("setCodec")},r.a.createElement(W.a,{value:"vp8",control:r.a.createElement(D.a,{color:"primary"}),label:"vp8"}),r.a.createElement(W.a,{value:"h264",control:r.a.createElement(D.a,{color:"primary"}),label:"h264"})))))))),r.a.createElement(v.a,{item:!0,xs:12,md:8},le&&r.a.createElement(A.a,{stream:le,fit:"contain",label:"local"}),ie.map(function(e){return r.a.createElement(A.a,{key:e.getId(),stream:e,fit:"contain",label:e.getId()})})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=Object(M.a)({palette:{primary:{main:"#1E88E5"},secondary:{main:"#FF4081"}}});o.a.render(r.a.createElement(T.a,{theme:ee},r.a.createElement(function(){return r.a.createElement(B.SnackbarProvider,{anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2500,maxSnack:5},r.a.createElement(_,null))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[101,1,2]]]);
//# sourceMappingURL=main.8f489a2a.chunk.js.map